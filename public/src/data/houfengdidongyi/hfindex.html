<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¿·å®«æ¸¸æˆ</title>
    <link rel="stylesheet" type="text/css" href="css/maze.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- é¡µé¢èƒŒæ™¯ -->
    <div class="page-background"></div>

    <div class="container">
        <div class="game-header">
            <h1>è¿·å®«å°æ¸¸æˆ</h1>
            <div class="game-decoration"></div>
        </div>
        
        <!-- æ¸¸æˆè§„åˆ™è¯´æ˜ -->
        <div id="game-rules" class="game-rules">
            <div class="rules-card">
                <h2>æ¸¸æˆè§„åˆ™è¯´æ˜</h2>
                <div class="rule-content">
                    <ul>
                        <li><span class="rule-icon">ğŸ®</span>è¿™æ˜¯ä¸€ä¸ªè¿·å®«é—¯å…³æ¸¸æˆ</li>
                        <li><span class="rule-icon">âŒ¨ï¸</span>ä½¿ç”¨é”®ç›˜çš„æ–¹å‘é”®æˆ–Wã€Aã€Sã€Dé”®æ§åˆ¶çº¢è‰²æ–¹å—ç§»åŠ¨</li>
                        <li><span class="rule-icon">ğŸ¯</span>ç›®æ ‡æ˜¯åœ¨è¿·å®«ä¸­æ”¶é›†"ç ”ã€å¢¨ã€æ¶¦ã€ç¬”"å››ä¸ªå­—ï¼Œç„¶ååˆ°è¾¾å³ä¸‹è§’çš„ç»¿è‰²ç»ˆç‚¹</li>
                        <li><span class="rule-icon">â±ï¸</span>æ¸¸æˆä¼šè®°å½•æ‚¨å®Œæˆæ¸¸æˆæ‰€éœ€çš„æ—¶é—´</li>
                        <li><span class="rule-icon">ğŸ“Š</span>è¿·å®«å¤§å°ï¼š16Ã—16</li>
                        <li><span class="rule-icon">ğŸ–Œï¸</span>æ”¶é›†å®Œå››ä¸ªå­—å¹¶åˆ°è¾¾ç»ˆç‚¹å³å¯è§£é”å®‹å¾½å®—çš„ã€Šç‘é¹¤å›¾ã€‹ä¹¦æ³•ä½œå“</li>
                    </ul>
                </div>
                <div class="start-button-container">
                    <button id="start-game-btn" onclick="startGame()">å¼€å§‹æ¸¸æˆ</button>
                </div>
            </div>
        </div>
        
        <!-- æ¸¸æˆä¸»ç•Œé¢ -->
        <div id="game-container" class="game-container" style="display: none;">
            <div class="game-content">
                <div class="game-left">
                    <div class="canvas-container">
                        <div class="maze-wrapper">
                            <canvas id="mycanvas"></canvas>
                        </div>
                        <div id="level-info" class="level-info">æ”¶é›†"ç ”å¢¨æ¶¦ç¬”"å››ä¸ªå­—ï¼Œåˆ°è¾¾ç»ˆç‚¹å³å¯è§£é”ä¹¦æ³•ä½œå“</div>
                    </div>
                </div>

                <div class="game-right">
                    <div class="control-panel">
                        <h4>æ¸¸æˆæ§åˆ¶</h4>
                        <div class="time-display">
                            <span id="mytime" class="time-counter">00æ—¶00åˆ†00ç§’</span>
                        </div>
                        <div class="control-buttons">
                            <button class="game-btn continue-btn" onclick="start()">ç»§ç»­æ¸¸æˆ</button>
                            <button class="game-btn pause-btn" onclick="stop()">æš‚åœ</button>
                            <button class="game-btn restart-btn" onclick="renovates()">é‡æ–°å¼€å§‹</button>
                        </div>
                        <div class="game-tips">
                            <p>æç¤ºï¼šä½¿ç”¨æ–¹å‘é”®æˆ–WASDç§»åŠ¨çº¢è‰²æ–¹å—ï¼Œåˆ°è¾¾ç»¿è‰²ç»ˆç‚¹å³å¯è¿‡å…³</p>
                        </div>
                    </div>
                    
                    <!-- é›†å­—åŒºåŸŸ -->
                    <div class="calligraphy-collection">
                        <h4>é›†å­—è¿›åº¦</h4>
                        <div class="characters-container">
                            <div class="character-item" id="char1">
                                <div class="character-box locked">ç ”</div>
                                <span class="character-status">æœªè·å¾—</span>
                            </div>
                            <div class="character-item" id="char2">
                                <div class="character-box locked">å¢¨</div>
                                <span class="character-status">æœªè·å¾—</span>
                            </div>
                            <div class="character-item" id="char3">
                                <div class="character-box locked">æ¶¦</div>
                                <span class="character-status">æœªè·å¾—</span>
                            </div>
                            <div class="character-item" id="char4">
                                <div class="character-box locked">ç¬”</div>
                                <span class="character-status">æœªè·å¾—</span>
                            </div>
                        </div>
                        <div class="collection-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="collection-progress-fill" style="width: 0%"></div>
                            </div>
                            <span class="progress-text">æ”¶é›†è¿›åº¦: <span id="collection-count">0</span>/4</span>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="copyright">
                <p>Copyright Â© 2025 è¿·å®«å°æ¸¸æˆ All Rights Reserved</p>
            </footer>
        </div>
    </div>

    <script type="text/javascript">
        var aa = 16; // å›ºå®šä¸º16Ã—16çš„è¿·å®«
        var level = 1;
        var chess = null;
        var context = null;
        var gameStarted = false;
        var Context = null;
        
        // é›†å­—ç³»ç»Ÿå˜é‡
        var collectedChars = [false, false, false, false]; // è®°å½•å››ä¸ªå­—çš„æ”¶é›†çŠ¶æ€
        var charNames = ["ç ”", "å¢¨", "æ¶¦", "ç¬”"]; // å››ä¸ªå­—çš„åç§°
        var charPositions = []; // å­˜å‚¨å››ä¸ªå­—çš„ä½ç½®

        var tree = [];//å­˜æ”¾æ˜¯å¦è”é€š
        var isling = [];//åˆ¤æ–­æ˜¯å¦ç›¸è¿
        
        // å¼€å§‹æ¸¸æˆå‡½æ•°ï¼Œæ˜¾ç¤ºæ¸¸æˆç•Œé¢ï¼Œéšè—è§„åˆ™
        function startGame() {
            // éšè—è§„åˆ™ç•Œé¢
            document.getElementById('game-rules').style.display = 'none';
            // æ˜¾ç¤ºæ¸¸æˆä¸»ç•Œé¢
            document.getElementById('game-container').style.display = 'block';
            
            // è·å–Canvaså’ŒContext
            chess = document.getElementById("mycanvas");
            context = chess.getContext('2d');
            
            // åˆå§‹åŒ–æ¸¸æˆçŠ¶æ€
            gameStarted = true;
            initializeGame();
            updateLevelInfo();
            resetCollectionStatus();
            
            // å¼€å§‹è®¡æ—¶
            start();
            
            // è®¾ç½®ç„¦ç‚¹åˆ°Canvas
            chess.focus();
        }
        
        // é‡ç½®é›†å­—çŠ¶æ€
        function resetCollectionStatus() {
            collectedChars = [false, false, false, false];
            updateCollectionUI();
        }
        
        // æ›´æ–°é›†å­—UI
        function updateCollectionUI() {
            var count = 0;
            for (var i = 0; i < 4; i++) {
                var charBox = document.getElementById('char' + (i+1)).querySelector('.character-box');
                var statusText = document.getElementById('char' + (i+1)).querySelector('.character-status');
                
                if (collectedChars[i]) {
                    charBox.classList.remove('locked');
                    charBox.classList.add('unlocked');
                    statusText.textContent = "å·²è·å¾—";
                    statusText.style.color = "#16a34a";
                    count++;
                } else {
                    charBox.classList.remove('unlocked');
                    charBox.classList.add('locked');
                    statusText.textContent = "æœªè·å¾—";
                    statusText.style.color = "#9ca3af";
                }
            }
            
            // æ›´æ–°è¿›åº¦æ¡
            document.getElementById('collection-count').textContent = count;
            var progressPercent = (count / 4) * 100;
            document.getElementById('collection-progress-fill').style.width = progressPercent + '%';
        }
        
        // è·å¾—ä¸€ä¸ªæ–°å­—
        function collectChar(charIndex) {
            if (charIndex >= 0 && charIndex < 4) {
                collectedChars[charIndex] = true;
                updateCollectionUI();
            }
        }
        
        // æ£€æŸ¥æ˜¯å¦å·²æ”¶é›†å…¨éƒ¨å››ä¸ªå­—
        function checkAllCharsCollected() {
            for (var i = 0; i < 4; i++) {
                if (!collectedChars[i]) return false;
            }
            return true;
        }
        
        // æ›´æ–°å…³å¡ä¿¡æ¯
        function updateLevelInfo() {
            document.getElementById('level-info').innerHTML = "æ”¶é›†\"ç ”å¢¨æ¶¦ç¬”\"å››ä¸ªå­—ï¼Œåˆ°è¾¾ç»ˆç‚¹å³å¯è§£é”å®‹å¾½å®—ã€Šç‘é¹¤å›¾ã€‹";
        }
        
        // åˆå§‹åŒ–æ¸¸æˆ
        function initializeGame() {
            // è®¾ç½®ç”»å¸ƒå¤§å°
            var canvasSize = aa * 30 + 30; // è¿·å®«å¤§å° + è¾¹è·
            chess.width = canvasSize;
            chess.height = canvasSize;
            
            // åˆå§‹åŒ–æ ‘
            for (var i = 0; i < aa; i++) {
                tree[i] = [];
                for (var j = 0; j < aa; j++) {
                    tree[i][j] = -1;
                }
            }
            
            // åˆå§‹åŒ–è¿æ¥
            for (var i = 0; i < aa * aa; i++) {
                isling[i] = [];
                for (var j = 0; j < aa * aa; j++) {
                    isling[i][j] = -1;
                }
            }
            
            // æ¸…ç©ºCanvas
            context.clearRect(0, 0, chess.width, chess.height);
            
            // ç»˜åˆ¶æ£‹ç›˜
            drawChessBoard();
            
            // ç”Ÿæˆè¿·å®«
            while (search(0) != search(aa * aa - 1)) {
                var num = parseInt(Math.random() * aa * aa);
                var neihbour = getnei(num);
                if (search(num) == search(neihbour)) { continue; }
                else {
                    isling[num][neihbour] = 1; 
                    isling[neihbour][num] = 1;
                    drawline(num, neihbour);
                    union(num, neihbour);
                }
            }
            
            // è®¾ç½®èµ·ç‚¹å’Œç»ˆç‚¹
            a = aa * 30 - 10;
            b = aa * 30 - 10;
            x = 20;
            y = 20;
            
            // ç”Ÿæˆå››ä¸ªå­—çš„ä½ç½®
            generateCharPositions();
            
            // åˆå§‹åŒ–ç©å®¶å’Œç»ˆç‚¹
            load();
        }

        // ç”Ÿæˆå››ä¸ªå­—çš„ä½ç½®
        function generateCharPositions() {
            // æ‰¾åˆ°æ‰€æœ‰ä»èµ·ç‚¹å¯è¾¾çš„æ ¼å­
            var reachableCells = [];
            var visited = new Array(aa * aa).fill(false);
            var queue = [0];
            visited[0] = true;
            //reachableCells.push(0); // Don't add start to reachableCells for character placement directly

            while (queue.length > 0) {
                var curr = queue.shift();
                var x = Math.floor(curr / aa);
                var y = curr % aa;
                var directions = [
                    {dx: -1, dy: 0}, // ä¸Š
                    {dx: 1, dy: 0},  // ä¸‹
                    {dx: 0, dy: -1}, // å·¦
                    {dx: 0, dy: 1}   // å³
                ];

                for (var i = 0; i < directions.length; i++) {
                    var nx = x + directions[i].dx;
                    var ny = y + directions[i].dy;

                    if (nx >= 0 && nx < aa && ny >= 0 && ny < aa) {
                        var next = nx * aa + ny;
                         if (!visited[next] && isling[curr][next] === 1) {
                            visited[next] = true;
                            queue.push(next);
                            reachableCells.push(next); // Add all reachable cells (including end)
                        }
                    }
                }
            }

            // åœ¨å¯è¾¾æ ¼å­é‡Œéšæœºé€‰æ‹©å››ä¸ªå­—çš„ä½ç½®
            charPositions = [];
            // Filter out start (0) and end (aa*aa - 1) from the reachable cells for character placement
            var availableCells = reachableCells.filter(pos => pos !== 0 && pos !== aa * aa - 1);

            if (availableCells.length < 4) {
                 console.error("å¯ç”¨äºæ”¾ç½®å­—çš„æ ¼å­å°‘äº4ä¸ªï¼Œæ— æ³•æ”¾ç½®æ‰€æœ‰å­—ã€‚Maze might be too simple or disconnected.");
                 // Fallback: If not enough valid spots, log error and place characters at start
                 // This indicates a significant issue with maze generation creating very few reachable cells
                 charPositions = [0, 0, 0, 0]; // Placing at start, will likely be instant collect
                 return;
            }

            // Randomly shuffle available cells
            for (var i = availableCells.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var temp = availableCells[i];
                availableCells[i] = availableCells[j];
                availableCells[j] = temp;
            }

            // Select the first four positions
            charPositions = availableCells.slice(0, 4);
        }

        function drawChessBoard() {
            context.strokeStyle = '#A77E58';
            for (var i = 0; i < aa + 1; i++) {
                context.beginPath();
                context.moveTo(15 + i * 30, 15);
                context.lineTo(15 + i * 30, 15 + 30 * aa);
                context.stroke();
                context.moveTo(15, 15 + i * 30);
                context.lineTo(15 + 30 * aa, 15 + i * 30);
                context.stroke();
                context.closePath();
            }
        }

        function getnei(a) {
            var x = parseInt(a / aa);
            var y = a % aa;
            var myneibor = new Array();
            if (x - 1 >= 0) { myneibor.push((x - 1) * aa + y); }
            if (x + 1 < aa) { myneibor.push((x + 1) * aa + y); }
            if (y + 1 < aa) { myneibor.push(x * aa + y + 1); }
            if (y - 1 >= 0) { myneibor.push(x * aa + y - 1); }
            var ran = parseInt(Math.random() * myneibor.length);
            return myneibor[ran];
        }
        
        function search(a) {
            if (tree[parseInt(a / aa)][a % aa] > 0) {
                return search(tree[parseInt(a / aa)][a % aa]);
            }
            else
                return a;
        }
        
        function union(a, b) {
            var a1 = search(a);
            var b1 = search(b);
            if (a1 == b1) { }
            else {
                if (tree[parseInt(a1 / aa)][a1 % aa] < tree[parseInt(b1 / aa)][b1 % aa]) {
                    tree[parseInt(a1 / aa)][a1 % aa] += tree[parseInt(b1 / aa)][b1 % aa];
                    tree[parseInt(b1 / aa)][b1 % aa] = a1;
                }
                else {
                    tree[parseInt(b1 / aa)][b1 % aa] += tree[parseInt(a1 / aa)][a1 % aa];
                    tree[parseInt(a1 / aa)][a1 % aa] = b1;
                }
            }
        }

        function drawline(a, b) {
            var x1 = parseInt(a / aa);
            var y1 = a % aa;
            var x2 = parseInt(b / aa);
            var y2 = b % aa;

            // Calculate the canvas coordinates for the two cells' centers
            var cell1CenterX = 15 + y1 * 30 + 15; // 15 (grid offset) + col*30 + 15 (cell center offset)
            var cell1CenterY = 15 + x1 * 30 + 15; // 15 (grid offset) + row*30 + 15 (cell center offset)
            var cell2CenterX = 15 + y2 * 30 + 15;
            var cell2CenterY = 15 + x2 * 30 + 15;

            // Calculate the wall position between the two cells
            // The walls are part of the initial grid lines.
            // Vertical walls are at 15 + (col + 1) * 30
            // Horizontal walls are at 15 + (row + 1) * 30

            context.fillStyle = '#F7E9D7'; // Use the background color to clear the wall

            if (x1 === x2) { // Horizontal movement (same row, different columns -> vertical wall)
                // y1 and y2 are column indices
                var wallX = 15 + Math.max(y1, y2) * 30; // The vertical wall is on the right of the left cell
                var wallY = 15 + x1 * 30; // The vertical wall spans the row
                context.clearRect(wallX - 2, wallY + 1, 4, 28); // Clear a 4x28 rectangle centered on the wall line
                // context.fillRect(wallX - 2, wallY + 1, 4, 28); // Use fillRect with background color
            } else { // Vertical movement (same column, different rows -> horizontal wall)
                // x1 and x2 are row indices
                var wallY = 15 + Math.max(x1, x2) * 30; // The horizontal wall is below the upper cell
                var wallX = 15 + y1 * 30; // The horizontal wall spans the column
                context.clearRect(wallX + 1, wallY - 2, 28, 4); // Clear a 28x4 rectangle centered on the wall line
                // context.fillRect(wallX + 1, wallY - 2, 28, 4); // Use fillRect with background color
            }
             // Restore stroke color for future drawing (though not strictly needed if only clearing)
             context.strokeStyle = '#A77E58';
        }
        
        function load() {
            var canvas = document.getElementById("mycanvas");
            Context = canvas.getContext("2d");
            
            // è®¾ç½®èµ·ç‚¹å’Œç»ˆç‚¹ä½ç½®
            x = 20;
            y = 20;
            a = aa * 30 - 10;
            b = aa * 30 - 10;
            
            // ç»˜åˆ¶ç©å®¶
            Context.fillStyle = "#8C1C13";
            Context.fillRect(x, y, 20, 20);
            
            // ç»˜åˆ¶ç»ˆç‚¹
            context.fillStyle = "#557153";
            context.fillRect(a, b, 20, 20);
            
            // ç»˜åˆ¶å››ä¸ªå­—
            drawCharacters();
            
            canvas.addEventListener('keydown', doKeyDown, true);
            window.addEventListener('keydown', doKeyDown, true);
        }

        // ç»˜åˆ¶å››ä¸ªå­—
        function drawCharacters() {
            context.font = "20px åæ–‡æ¥·ä½“";
            context.textAlign = "center";
            context.textBaseline = "middle";
            
            for (var i = 0; i < charPositions.length; i++) {
                if (!collectedChars[i]) {
                    var pos = charPositions[i];
                    var charX = (pos % aa) * 30 + 30;
                    var charY = Math.floor(pos / aa) * 30 + 30;
                    
                    context.fillStyle = "#8C1C13";
                    context.fillText(charNames[i], charX, charY);
                }
            }
        }

        function doKeyDown(e) {
            if (!gameStarted) return;

            var keyID = e.keyCode ? e.keyCode : e.which;
            // Only process input if game is not paused (i == 1)
            if (i == 1) {
                var oldX = x;
                var oldY = y;

                // Calculate current cell index based on player position
                // Player position (x, y) is the top-left corner of the 20x20 square
                // The grid lines are at 15, 45, 75, ...
                // Cell (0,0) spans x: 15-45, y: 15-45. Player at (20, 20) is in cell (0,0).
                // Cell (row, col) starts at canvas coordinate (15 + col*30, 15 + row*30)
                // Player at (x, y) is in cell ( (y-15)/30 , (x-15)/30 ) - adjust for 20x20 player
                // Player's top-left (x,y) is inside cell ( (y-15)/30, (x-15)/30 )
                // Let's use the top-left corner (x, y) for calculation, offset by 15 and divided by 30
                var currentRow = Math.floor((y - 15) / 30);
                var currentCol = Math.floor((x - 15) / 30);
                var currentCellIndex = currentRow * aa + currentCol;

                var targetRow = currentRow;
                var targetCol = currentCol;
                var canMove = false;

                if (keyID === 38 || keyID === 87) { // Up
                    targetRow = currentRow - 1;
                    if (targetRow >= 0) {
                        var targetCellIndex = targetRow * aa + targetCol;
                        if (isling[currentCellIndex][targetCellIndex] === 1) {
                            y -= 30;
                            canMove = true;
                        }
                    }
                    e.preventDefault();
                }
                if (keyID === 39 || keyID === 68) { // Right
                    targetCol = currentCol + 1;
                     if (targetCol < aa) {
                        var targetCellIndex = targetRow * aa + targetCol;
                        if (isling[currentCellIndex][targetCellIndex] === 1) {
                            x += 30;
                            canMove = true;
                        }
                    }
                    e.preventDefault();
                }
                if (keyID === 40 || keyID === 83) { // Down
                    targetRow = currentRow + 1;
                    if (targetRow < aa) {
                        var targetCellIndex = targetRow * aa + targetCol;
                         if (isling[currentCellIndex][targetCellIndex] === 1) {
                            y += 30;
                            canMove = true;
                        }
                    }
                    e.preventDefault();
                }
                if (keyID === 37 || keyID === 65) { // Left
                    targetCol = currentCol - 1;
                    if (targetCol >= 0) {
                        var targetCellIndex = targetRow * aa + targetCol;
                         if (isling[currentCellIndex][targetCellIndex] === 1) {
                            x -= 30;
                            canMove = true;
                        }
                    }
                    e.preventDefault();
                }

                // Move the player and update if movement was possible
                if (canMove) {
                     // Clear the old player square
                    Context.clearRect(oldX, oldY, 20, 20);
                    // Draw the player at the new position
                    Context.fillStyle = "#8C1C13";
                    Context.fillRect(x, y, 20, 20);

                    // Check for character collection at the new position
                    checkCharCollection();

                    // Redraw all characters (to make collected ones disappear)
                    drawCharacters();

                    // Check for game over condition (reaching the end)
                    gameover();
                    show(); // Show completion message if game is over
                }
            }
        }

        // æ£€æŸ¥æ˜¯å¦æ”¶é›†åˆ°å­—
        function checkCharCollection() {
            var playerPos = Math.floor((x - 20) / 30) + Math.floor((y - 20) / 30) * aa;
            
            for (var i = 0; i < charPositions.length; i++) {
                if (!collectedChars[i] && playerPos === charPositions[i]) {
                    collectedChars[i] = true;
                    updateCollectionUI();
                }
            }
        }
        
        var end = false;
        
        function gameover() {
            if (x >= a && y >= b) {
                // æ£€æŸ¥æ˜¯å¦æ”¶é›†å®Œæ‰€æœ‰å­—
                if (checkAllCharsCollected()) {
                    end = true;
                } else {
                    // å¦‚æœæ²¡æ”¶é›†å®Œæ‰€æœ‰å­—ï¼Œæ˜¾ç¤ºæç¤º
                    alert("è¯·å…ˆæ”¶é›†å®Œæ‰€æœ‰å­—ï¼");
                    x = oldX;
                    y = oldY;
                }
            }
        }
        
        function show() {
            if (end == true) {
                stop();
                showCompletionMessage();
            }
        }
        
        // æ˜¾ç¤ºæ¸¸æˆå®Œæˆæ¶ˆæ¯ï¼Œä¿®æ”¹ä¸ºå±•ç¤ºä¹¦æ³•ä½œå“
        function showCompletionMessage() {
            // é›†é½æœ€åä¸€ä¸ªå­—
            collectChar(3);
            
            // éšè—ç”»å¸ƒå®¹å™¨
            document.querySelector('.canvas-container').style.display = 'none';
            
            // æ¸…é™¤ç”»å¸ƒ
            var canvasSize = aa * 30 + 30;
            Context.clearRect(0, 0, canvasSize, canvasSize);
            context.clearRect(0, 0, canvasSize, canvasSize);
            
            // åˆ›å»ºä¸€ä¸ªæ¨¡æ€æ¡†å±•ç¤ºé€šå…³ä¿¡æ¯å’Œä¹¦æ³•ä½œå“
            var modal = document.createElement('div');
            modal.className = 'completion-modal';
            
            var artworkHTML = '';
            if (checkAllCharsCollected()) {
                artworkHTML = `
                    <div class="artwork-preview">
                        <h3>æ­å–œè§£é”ä¹¦æ³•ä½œå“ï¼šå®‹å¾½å®—ã€Šç‘é¹¤å›¾ã€‹</h3>
                        <div class="artwork-image">
                            <img src="zuopingxinshang.jpg" alt="å®‹å¾½å®—ç‘é¹¤å›¾ä¹¦æ³•ä½œå“">
                        </div>
                        <p class="artwork-description">ã€Šç‘é¹¤å›¾ã€‹æ˜¯åŒ—å®‹å¾½å®—èµµä½¶æ‰€ç»˜ç”»çš„ä¼ ä¸–åä½œï¼Œç™½é¹¤åœ¨ä¸­å›½ä¼ ç»Ÿæ–‡åŒ–ä¸­è±¡å¾é•¿å¯¿å’Œç¥¥ç‘ã€‚</p>
                        <p class="artwork-description">å®‹å¾½å®—ä¸ä»…æ˜¯ä¸€ä½çš‡å¸ï¼Œæ›´æ˜¯ä¸€ä½å‡ºè‰²çš„è‰ºæœ¯å®¶ï¼Œç²¾é€šä¹¦æ³•ä¸ç»˜ç”»ã€‚</p>
                        <button class="view-full-artwork" onclick="showFullArtwork()">æ¬£èµå®Œæ•´ä½œå“</button>
                    </div>
                `;
            }
            
            modal.innerHTML = `
                <div class="completion-content">
                    <div class="completion-header">
                        <h2>æ­å–œæ‚¨å®Œæˆæ¸¸æˆï¼</h2>
                        <p class="completion-time">æ€»ç”¨æ—¶ï¼š${str}</p>
                    </div>
                    <div class="completion-body">
                        <p class="completion-message">æ‚¨å·²æˆåŠŸæ”¶é›†"ç ”å¢¨æ¶¦ç¬”"å››ä¸ªå­—</p>
                        ${artworkHTML}
                    </div>
                    <div class="completion-footer">
                        <button class="restart-button" onclick="renovates()">å†ç©ä¸€æ¬¡</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        // æ·»åŠ æ˜¾ç¤ºå®Œæ•´ä¹¦æ³•ä½œå“çš„åŠŸèƒ½
        function showFullArtwork() {
            // ç§»é™¤å½“å‰æ¨¡æ€æ¡†
            document.querySelector('.completion-modal').remove();
            
            // åˆ›å»ºå…¨å±ä¹¦æ³•æ¬£èµé¡µé¢
            var fullArtworkModal = document.createElement('div');
            fullArtworkModal.className = 'full-artwork-modal';
            
            fullArtworkModal.innerHTML = `
                <div class="full-artwork-content">
                    <div class="artwork-header">
                        <h2>ä¹¦æ³•ä½œå“æ¬£èµï¼šå®‹å¾½å®—ã€Šç‘é¹¤å›¾ã€‹</h2>
                        <div class="artwork-close" onclick="closeFullArtwork()">Ã—</div>
                    </div>
                    <div class="artwork-display">
                        <img src="zuopingxinshang.jpg" alt="å®‹å¾½å®—ç‘é¹¤å›¾ä¹¦æ³•ä½œå“">
                    </div>
                    <div class="artwork-info">
                        <div class="artwork-description">
                            <h3>ä½œå“ç®€ä»‹</h3>
                            <p>ã€Šç‘é¹¤å›¾ã€‹æ˜¯åŒ—å®‹å¾½å®—èµµä½¶æ‰€ç»˜ç”»çš„ä¼ ä¸–åä½œï¼Œåˆ›ä½œäºå®£å’Œä¸‰å¹´ï¼ˆ1112å¹´ï¼‰ï¼Œç°è—äºè¾½å®çœåšç‰©é¦†ã€‚</p>
                            <p>æ­¤ç”»æç»˜äº†äºŒååªç™½é¹¤ç¿±ç¿”äºç¢§ç©ºä¸­çš„åœºæ™¯ï¼Œæ„å›¾é›„ä¼Ÿå£®è§‚ï¼Œç¬”æ³•ç»†è…»ç²¾æ¹›ã€‚é¹¤åœ¨ä¸­å›½ä¼ ç»Ÿæ–‡åŒ–ä¸­è±¡å¾é•¿å¯¿å’Œç¥¥ç‘ï¼Œæ•…å"ç‘é¹¤å›¾"ã€‚</p>
                            <p>å®‹å¾½å®—èµµä½¶ç²¾é€šä¹¦ç”»ï¼Œå…¶åˆ›ç«‹çš„"ç˜¦é‡‘ä½“"ä¹¦æ³•ç‹¬å…·ä¸€æ ¼ï¼ŒæŒºæ‹”ç§€ä¸½ï¼Œå¦‚é›•å¦‚ç¢ã€‚ã€Šç‘é¹¤å›¾ã€‹ä¸­çš„é¢˜è·‹å³æ˜¯ç”¨ç˜¦é‡‘ä½“ä¹¦å†™ï¼Œå±•ç°äº†å¾½å®—ç²¾æ¹›çš„è‰ºæœ¯é€ è¯£ã€‚</p>
                            <p>æ­¤ä½œå“ä¸ä»…å…·æœ‰æé«˜çš„è‰ºæœ¯ä»·å€¼ï¼Œæ›´è•´å«äº†ä¸­å›½ä¼ ç»Ÿæ–‡åŒ–ä¸­å¯¹å‰ç¥¥å¦‚æ„ã€é•¿å¯¿å¹³å®‰çš„ç¾å¥½ç¥æ„¿ã€‚</p>
                            <p>ã€Šç‘é¹¤å›¾ã€‹å°†ç»˜ç”»ã€ä¹¦æ³•ä¸è¯—æ–‡å®Œç¾ç»“åˆï¼Œæ˜¯ä¸­å›½å¤ä»£è‰ºæœ¯çš„ç‘°å®ï¼Œåæ˜ äº†å®‹ä»£å®«å»·ç»˜ç”»çš„å“è¶Šæˆå°±å’Œçš‡å®¶å®¡ç¾çš„é«˜é›…æƒ…è¶£ã€‚</p>
                        </div>
                    </div>
                    <button class="return-button" onclick="closeFullArtwork()">è¿”å›æ¸¸æˆ</button>
                </div>
            `;
            
            document.body.appendChild(fullArtworkModal);
        }
        
        // å…³é—­å…¨å±ä¹¦æ³•æ¬£èµé¡µé¢å¹¶è¿”å›æ¸¸æˆè§„åˆ™é¡µé¢
        function closeFullArtwork() {
            // ç§»é™¤ä¹¦æ³•æ¬£èµæ¨¡æ€æ¡†
            document.querySelector('.full-artwork-modal').remove();
            
            // é‡æ–°åŠ è½½æ¸¸æˆå¹¶æ˜¾ç¤ºæ¸¸æˆè§„åˆ™é¡µé¢
            resetGame();
        }
        
        // é‡ç½®æ¸¸æˆåˆ°åˆå§‹çŠ¶æ€ï¼Œæ˜¾ç¤ºæ¸¸æˆè§„åˆ™é¡µé¢
        function resetGame() {
            // é‡ç½®æ¸¸æˆç›¸å…³å˜é‡
            aa = 16;
            h = m = s = 0;
            i = 0;
            end = false;
            gameStarted = false;
            
            // é‡ç½®é›†å­—çŠ¶æ€
            resetCollectionStatus();
            
            // éšè—æ¸¸æˆç•Œé¢ï¼Œæ˜¾ç¤ºè§„åˆ™é¡µé¢
            document.getElementById('game-container').style.display = 'none';
            document.getElementById('game-rules').style.display = 'block';
            
            // æ¸…é™¤è®¡æ—¶å™¨
            clearInterval(time);
            
            // æ›´æ–°æ—¶é—´æ˜¾ç¤ºä¸ºåˆå§‹å€¼
            var mytime = document.getElementById('mytime');
            if (mytime) {
                mytime.innerHTML = "00æ—¶00åˆ†00ç§’";
            }
        }
        
        var h = m = s = 0;  //å®šä¹‰æ—¶ï¼Œåˆ†ï¼Œç§’å¹¶åˆå§‹åŒ–ä¸º0ï¼›
        var time = 0;
        var i = 0;
        var str = "";
        
        function timer() {   //å®šä¹‰è®¡æ—¶å‡½æ•°
            s = s + 1;         //ç§’
            if (s >= 60) {
                s = 0;
                m = m + 1;        //åˆ†é’Ÿ
            }
            if (m >= 60) {
                m = 0;
                h = h + 1;        //å°æ—¶
            }
            str = toDub(h) + "æ—¶" + toDub(m) + "åˆ†" + toDub(s) + "ç§’";
            mytime = document.getElementById('mytime');
            mytime.innerHTML = str;
        }

        function start() {  //å¼€å§‹
            i = 1;
            time = setInterval(timer, 1000);
        }

        function stop() {  //æš‚åœ
            i = 0;
            clearInterval(time);
        }

        function toDub(n) {  //è¡¥0æ“ä½œ
            if (n < 10) {
                return "0" + n;
            }
            else {
                return "" + n;
            }
        }
        
        function renovates() {
            document.location.reload();
        }
    </script>
    <style>
        /* åŸºç¡€æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', "Microsoft YaHei", "å¾®è½¯é›…é»‘", sans-serif;
            color: #593C1C;
            background-color: #f5f0e6;
            position: relative;
            min-height: 100vh;
        }
        
        /* é¡µé¢èƒŒæ™¯ - è®¾ç½®beijing.pngä¸ºèƒŒæ™¯å›¾ */
        .page-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-image: url('beijing.jpg');
            opacity: 0.85; /* è°ƒæ•´é€æ˜åº¦ä½¿å†…å®¹æ›´æ¸…æ™° */
        }

        .container {
            width: 1100px;
            max-width: 95%;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }
        
        /* æ¸¸æˆæ ‡é¢˜æ ·å¼ - å¤é£è®¾è®¡ */
        .game-header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }
        
        .game-header h1 {
            font-size: 48px;
            font-weight: 700;
            color: #8C1C13;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            position: relative;
            display: inline-block;
            letter-spacing: 4px;
            font-family: "åæ–‡è¡Œæ¥·", "æ¥·ä½“", serif;
        }
        
        .game-decoration {
            height: 4px;
            width: 120px;
            background: linear-gradient(90deg, #8C1C13, #C46C48);
            margin: 0 auto;
            border-radius: 2px;
        }
        
        /* æ¸¸æˆè§„åˆ™æ ·å¼ - å¤é£çº¸å¼ æ•ˆæœ */
        .game-rules {
            display: block;
            max-width: 800px;
            margin: 40px auto;
            transition: all 0.3s ease;
        }
        
        .rules-card {
            background-color: #F7E9D7;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(89, 60, 28, 0.15);
            padding: 40px;
            position: relative;
            overflow: hidden;
            border: 1px solid #D3AB78;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23d3ab78' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        
        .rules-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg width='6' height='6' viewBox='0 0 6 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23D3AB78' fill-opacity='0.1' fill-rule='evenodd'%3E%3Cpath d='M5 0h1L0 5v1H5z'/%3E%3Cpath d='M6 5v1H5z'/%3E%3C/g%3E%3C/svg%3E");
            pointer-events: none;
        }
        
        .rules-card h2 {
            text-align: center;
            font-size: 32px;
            color: #8C1C13;
            margin-bottom: 30px;
            position: relative;
            font-family: "åæ–‡æ¥·ä½“", "æ¥·ä½“", serif;
        }
        
        .rule-content ul {
            list-style: none;
            padding: 0;
            margin-bottom: 30px;
        }
        
        .rule-content li {
            font-size: 16px;
            line-height: 2;
            margin-bottom: 15px;
            padding-left: 35px;
            position: relative;
            display: flex;
            align-items: center;
            color: #593C1C;
            font-family: "å®‹ä½“", serif;
        }
        
        .rule-icon {
            margin-right: 10px;
            font-size: 20px;
        }
        
        .start-button-container {
            text-align: center;
            margin-top: 30px;
        }
        
        #start-game-btn {
            background: linear-gradient(45deg, #8C1C13, #C46C48);
            color: #F7E9D7;
            border: none;
            border-radius: 4px;
            padding: 15px 40px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(140, 28, 19, 0.3);
            font-family: "åæ–‡æ¥·ä½“", "æ¥·ä½“", serif;
        }
        
        #start-game-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(140, 28, 19, 0.4);
        }
        
        #start-game-btn:active {
            transform: translateY(1px);
            box-shadow: 0 3px 10px rgba(140, 28, 19, 0.3);
        }

        /* æ¸¸æˆå®¹å™¨æ ·å¼ */
        .game-container {
            margin: 40px auto;
            background-color: #F7E9D7;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(89, 60, 28, 0.15);
            padding: 30px;
            position: relative;
            overflow: hidden;
            min-height: 300px;
            border: 1px solid #D3AB78;
        }
        
        .game-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 30px;
        }
        
        .game-left {
            flex: 1;
            min-width: 300px;
        }
        
        .game-right {
            width: 300px;
        }
        
        .canvas-container {
            position: relative;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .maze-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            min-height: 300px;
            background-color: #F7E9D7;
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(89, 60, 28, 0.1);
            border: 1px solid #D3AB78;
            padding: 15px;
        }
        
        canvas {
            display: block;
            background-color: #F7E9D7;
            border-radius: 5px;
            max-width: 100%;
            height: auto;
        }
        
        .level-info {
            text-align: center;
            font-size: 18px;
            font-weight: 600;
            margin-top: 15px;
            color: #8C1C13;
            padding: 10px;
            background-color: #F5E5C9;
            border-radius: 4px;
            border: 1px solid #D3AB78;
            font-family: "åæ–‡æ¥·ä½“", "æ¥·ä½“", serif;
        }

        .control-panel {
            background-color: #F5E5C9;
            border-radius: 6px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(89, 60, 28, 0.05);
            border: 1px solid #D3AB78;
        }
        
        .control-panel h4 {
            font-size: 22px;
            font-weight: 600;
            color: #8C1C13;
            margin-bottom: 20px;
            text-align: center;
            position: relative;
            padding-bottom: 10px;
            font-family: "åæ–‡æ¥·ä½“", "æ¥·ä½“", serif;
        }
        
        .control-panel h4:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 3px;
            background: linear-gradient(90deg, #8C1C13, #C46C48);
            border-radius: 3px;
        }
        
        .time-display {
            background-color: #F7E9D7;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(89, 60, 28, 0.05);
            text-align: center;
            border: 1px solid #D3AB78;
        }
        
        .time-counter {
            font-size: 16px;
            font-weight: 600;
            color: #593C1C;
            font-family: "å®‹ä½“", serif;
        }
        
        .control-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .game-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            font-family: "åæ–‡æ¥·ä½“", "æ¥·ä½“", serif;
        }
        
        .continue-btn {
            background: linear-gradient(45deg, #557153, #7D8F69);
            color: #F7E9D7;
            box-shadow: 0 4px 12px rgba(85, 113, 83, 0.3);
        }
        
        .continue-btn:hover {
            background: linear-gradient(45deg, #465C44, #557153);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(85, 113, 83, 0.4);
        }
        
        .pause-btn {
            background: linear-gradient(45deg, #C46C48, #EDAA78);
            color: #F7E9D7;
            box-shadow: 0 4px 12px rgba(196, 108, 72, 0.3);
        }
        
        .pause-btn:hover {
            background: linear-gradient(45deg, #B25E3E, #C46C48);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(196, 108, 72, 0.4);
        }
        
        .restart-btn {
            background: linear-gradient(45deg, #8C1C13, #C33C25);
            color: #F7E9D7;
            box-shadow: 0 4px 12px rgba(140, 28, 19, 0.3);
        }
        
        .restart-btn:hover {
            background: linear-gradient(45deg, #7A1810, #8C1C13);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(140, 28, 19, 0.4);
        }
        
        .game-tips {
            margin-top: 20px;
            padding: 15px;
            background-color: #F7E9D7;
            border-left: 4px solid #D3AB78;
            border-radius: 4px;
        }
        
        .game-tips p {
            font-size: 14px;
            color: #593C1C;
            line-height: 1.5;
            font-family: "å®‹ä½“", serif;
        }
        
        /* ç‰ˆæƒä¿¡æ¯ */
        .copyright {
            text-align: center;
            padding: 20px 0;
            color: #593C1C;
            font-size: 14px;
            margin-top: 40px;
            border-top: 1px solid #D3AB78;
            font-family: "å®‹ä½“", serif;
        }
        
        /* é›†å­—åŒºåŸŸæ ·å¼ - å¤é£è®¾è®¡ */
        .calligraphy-collection {
            background-color: #F5E5C9;
            border-radius: 6px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(89, 60, 28, 0.05);
            margin-top: 20px;
            border: 1px solid #D3AB78;
        }
        
        .calligraphy-collection h4 {
            font-size: 22px;
            font-weight: 600;
            color: #8C1C13;
            margin-bottom: 20px;
            text-align: center;
            position: relative;
            padding-bottom: 10px;
            font-family: "åæ–‡æ¥·ä½“", "æ¥·ä½“", serif;
        }
        
        .calligraphy-collection h4:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 3px;
            background: linear-gradient(90deg, #8C1C13, #C46C48);
            border-radius: 3px;
        }
        
        .characters-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .character-item {
            text-align: center;
            width: 22%;
        }
        
        .character-box {
            width: 100%;
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #F7E9D7;
            border-radius: 5px;
            margin-bottom: 8px;
            font-size: 28px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(89, 60, 28, 0.1);
            transition: all 0.3s ease;
            border: 1px solid #D3AB78;
            font-family: "åæ–‡è¡Œæ¥·", "æ¥·ä½“", serif;
        }
        
        .character-box.locked {
            color: #9C8B7A;
            background-color: #F5E5C9;
            filter: grayscale(1);
            opacity: 0.7;
        }
        
        .character-box.unlocked {
            color: #8C1C13;
            background-color: #F7E9D7;
            border: 2px solid #8C1C13;
            filter: grayscale(0);
            opacity: 1;
        }
        
        .character-status {
            font-size: 12px;
            color: #9C8B7A;
            font-family: "å®‹ä½“", serif;
        }
        
        .collection-progress {
            text-align: center;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #E7D7C1;
            border-radius: 4px;
            margin-bottom: 8px;
            overflow: hidden;
            border: 1px solid #D3AB78;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8C1C13, #C46C48);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .progress-text {
            font-size: 14px;
            color: #593C1C;
            font-family: "å®‹ä½“", serif;
        }
        
        /* ä¹¦æ³•ä½œå“æ ·å¼ - å¤é£å·è½´æ•ˆæœ */
        .calligraphy-artwork {
            position: relative;
            padding: 20px;
            background: #F7E9D7;
            border-radius: 8px;
            text-align: center;
            margin: 10px auto;
            width: 90%;
            border: 1px solid #D3AB78;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 25px rgba(89, 60, 28, 0.15);
        }
        
        .calligraphy-artwork img {
            max-width: 100%;
            max-height: 250px;
            object-fit: contain;
            border-radius: 5px;
            box-shadow: 0 10px 25px rgba(89, 60, 28, 0.1);
            border: 1px solid #D3AB78;
        }
        
        .calligraphy-artwork h3 {
            font-size: 26px;
            margin: 20px 0;
            color: #8C1C13;
            font-family: "åæ–‡æ¥·ä½“", "æ¥·ä½“", serif;
        }
        
        .calligraphy-artwork p {
            color: #593C1C;
            margin-bottom: 10px;
            line-height: 1.5;
            font-size: 14px;
            font-family: "å®‹ä½“", serif;
        }
        
        .calligraphy-artwork button.view-full-artwork {
            background: linear-gradient(45deg, #8C1C13, #C46C48);
            color: #F7E9D7;
            border: none;
            border-radius: 4px;
            padding: 12px 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(140, 28, 19, 0.4);
            font-family: "åæ–‡æ¥·ä½“", "æ¥·ä½“", serif;
            margin-top: 15px;
        }
        
        .calligraphy-artwork button.view-full-artwork:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(140, 28, 19, 0.6);
        }
        
        /* å…³å¡å®Œæˆæ¨¡æ€æ¡† - å¤é£è®¾è®¡ */
        .completion-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(89, 60, 28, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .completion-content {
            background-color: #F7E9D7;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 40px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 2px solid #D3AB78;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        .completion-header {
            text-align: center;
            border-bottom: 2px solid #D3AB78;
            padding-bottom: 20px;
        }
        
        .completion-header h2 {
            color: #8C1C13;
            font-size: 32px;
            margin: 0 0 15px 0;
            font-family: "åæ–‡æ¥·ä½“", "æ¥·ä½“", serif;
        }
        
        .completion-time {
            color: #593C1C;
            font-size: 20px;
            margin: 0;
            font-family: "åæ–‡æ¥·ä½“", "æ¥·ä½“", serif;
        }
        
        .completion-body {
            text-align: center;
        }
        
        .completion-message {
            color: #593C1C;
            font-size: 24px;
            margin: 0 0 30px 0;
            font-family: "åæ–‡æ¥·ä½“", "æ¥·ä½“", serif;
        }
        
        .artwork-preview {
            background-color: #FDF6E9;
            border-radius: 8px;
            padding: 30px;
            margin: 20px 0;
            border: 1px solid #D3AB78;
        }
        
        .artwork-preview h3 {
            color: #8C1C13;
            font-size: 26px;
            margin: 0 0 20px 0;
            font-family: "åæ–‡æ¥·ä½“", "æ¥·ä½“", serif;
        }
        
        .artwork-image {
            margin: 20px 0;
        }
        
        .artwork-image img {
            max-width: 100%;
            max-height: 300px;
            border-radius: 8px;
            border: 2px solid #D3AB78;
            box-shadow: 0 5px 15px rgba(89, 60, 28, 0.2);
        }
        
        .artwork-description {
            color: #593C1C;
            font-size: 16px;
            line-height: 1.6;
            margin: 15px 0;
            font-family: "å®‹ä½“", serif;
        }
        
        .completion-footer {
            text-align: center;
            margin-top: 20px;
        }
        
        .restart-button, .view-full-artwork {
            background: linear-gradient(45deg, #8C1C13, #C46C48);
            color: #F7E9D7;
            border: none;
            border-radius: 6px;
            padding: 15px 40px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(140, 28, 19, 0.4);
            font-family: "åæ–‡æ¥·ä½“", "æ¥·ä½“", serif;
        }
        
        .restart-button:hover, .view-full-artwork:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(140, 28, 19, 0.6);
        }
        
        .view-full-artwork {
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .completion-content {
                padding: 20px;
            }
            
            .completion-header h2 {
                font-size: 24px;
            }
            
            .completion-time {
                font-size: 16px;
            }
            
            .completion-message {
                font-size: 20px;
            }
            
            .artwork-preview {
                padding: 20px;
            }
            
            .artwork-preview h3 {
                font-size: 22px;
            }
            
            .artwork-description {
                font-size: 14px;
            }
            
            .restart-button, .view-full-artwork {
                padding: 12px 30px;
                font-size: 16px;
            }
        }

        @media (max-width: 992px) {
            .game-content {
                flex-direction: column;
            }
            
            .game-left, .game-right {
                width: 100%;
            }
            
            .game-right {
                margin-top: 30px;
            }
        }

        /* å…¨å±ä¹¦æ³•æ¬£èµé¡µé¢ç¾åŒ– */
        .full-artwork-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(120deg, #f7e9d7 60%, #e6d3b3 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3000;
        }
        .full-artwork-content {
            background: #fffbe9;
            border-radius: 18px;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 48px 36px 36px 36px;
            box-shadow: 0 12px 40px rgba(89,60,28,0.18), 0 2px 8px #d3ab78;
            border: 6px double #d3ab78;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }
        .artwork-header {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 28px;
            border-bottom: 2px solid #d3ab78;
            padding-bottom: 12px;
        }
        .artwork-header h2 {
            color: #8C1C13;
            font-size: 32px;
            font-family: "åæ–‡æ¥·ä½“", "æ¥·ä½“", serif;
            margin: 0;
            letter-spacing: 2px;
            text-shadow: 1px 2px 8px #e6d3b3, 0 1px 0 #fffbe9;
            border-bottom: 3px solid #c46c48;
            display: inline-block;
            padding-bottom: 4px;
        }
        .artwork-close {
            font-size: 32px;
            color: #8C1C13;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s;
            background: #f7e9d7;
            border: 1.5px solid #d3ab78;
        }
        .artwork-close:hover {
            background: #c46c48;
            color: #fffbe9;
            border-color: #8c1c13;
        }
        .artwork-display {
            text-align: center;
            margin-bottom: 24px;
            width: 100%;
        }
        .artwork-display img {
            max-width: 100%;
            max-height: 340px;
            border-radius: 10px;
            border: 3px solid #d3ab78;
            box-shadow: 0 8px 32px rgba(140,28,19,0.13), 0 2px 8px #d3ab78;
            background: #f7e9d7;
            margin: 0 auto;
            display: block;
        }
        .artwork-info {
            width: 100%;
            margin-bottom: 18px;
        }
        .artwork-description {
            background: #fdf6e9;
            border-radius: 8px;
            border: 1.5px solid #d3ab78;
            padding: 22px 18px 12px 18px;
            color: #593C1C;
            font-size: 17px;
            line-height: 1.8;
            font-family: "å®‹ä½“", serif;
            box-shadow: 0 2px 8px rgba(140,28,19,0.07);
        }
        .artwork-description h3 {
            color: #8C1C13;
            font-size: 20px;
            margin-top: 0;
            margin-bottom: 12px;
            font-family: "åæ–‡æ¥·ä½“", "æ¥·ä½“", serif;
        }
        .return-button {
            background: linear-gradient(45deg, #8C1C13, #C46C48);
            color: #F7E9D7;
            border: none;
            border-radius: 6px;
            padding: 14px 38px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(140, 28, 19, 0.18);
            font-family: "åæ–‡æ¥·ä½“", "æ¥·ä½“", serif;
            margin-top: 18px;
        }
        .return-button:hover {
            background: linear-gradient(45deg, #C46C48, #8C1C13);
            color: #fffbe9;
            box-shadow: 0 8px 20px rgba(140, 28, 19, 0.22);
        }
        @media (max-width: 600px) {
            .full-artwork-content {
                padding: 18px 4vw 18px 4vw;
            }
            .artwork-header h2 {
                font-size: 20px;
            }
            .artwork-display img {
                max-height: 180px;
            }
            .artwork-description {
                font-size: 14px;
                padding: 10px 6px 8px 6px;
            }
            .return-button {
                padding: 10px 18px;
                font-size: 15px;
            }
        }
    </style>

</body>

</html>